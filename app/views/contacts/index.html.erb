<h1>Registros </h1>

<!-- Botón para ver contactos en JSON -->
<%= link_to 'Ver en JSON', index_json_contacts_path, class: 'btn btn-primary', target: '_blank' %>

<table>
  <thead>
    <tr>
      <th>Sexo</th>
      <th>Fecha de Nacimiento</th>
      <th>Nombre</th>
      <th>Apellido</th>
      <th>Email</th>
      <th>Dirección</th>
      <th>Detalles de Dirección</th>
      <th>País</th>
      <th>Departamento</th>
      <th>Ciudad</th>
      <th>Información</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @contacts.each do |contact| %>
      <tr>
        <td><%= contact.sex %></td>
        <td><%= contact.birth_date %></td>
        <td><%= contact.first_name %></td>
        <td><%= contact.last_name %></td>
        <td><%= contact.email %></td>
        <td><%= contact.address %></td>
        <td><%= contact.address_details %></td>
        <td><%= contact.country %></td>
        <td><%= contact.department %></td>
        <td><%= contact.city %></td>
        <td><%= contact.information %></td>
        <td><%= link_to 'Mostrar', contact %></td>
        <td><%= link_to 'Editar', edit_contact_path(contact) %></td>
        <td><%= link_to 'Eliminar', contact, method: :delete, data: { confirm: '¿Estás seguro?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<div>
  <%= link_to 'Contactar', new_contact_path %>
</div>

<h2>Total de Registros por Ciudad</h2>
<table>
  <thead>
    <tr>
      <th>Ciudad</th>
      <th>Total de Contactos</th>
    </tr>
  </thead>
  <tbody>
    <% @totals_by_city.each do |city, count| %>
      <tr>
        <td><%= city %></td>
        <td><%= count %></td>
      </tr>
    <% end %>
  </tbody>
</table>
